    <!doctype html>
<!--[if lt IE 7]>
<html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <title>文档中心</title>
    <meta name="keywords" content="documentation,dox"/>
    <meta name="description" content="项目开发相关文档"/>
    <link rel="stylesheet" type="text/css" href="../../templates/developer/assets/base.css"/>
    <link rel="stylesheet" type="text/css" href="../../static/themes/default/css/developer.css"/>
    <link rel="stylesheet" type="text/css" href="../../static/themes/default/css/typo.css"/>
    <script src="../../templates/default/assets/prettify.js"></script>
    <script src="../../templates/default/assets/jquery-1.8.2.min.js"></script>
</head>
<body>
<div class="outer-wrapper">
    <header class="top-bar top-bar-new">
        <div class="top-bar-wrapper">
            <div class="top-bar-left">
                <h1 class="logo"><a href="#">文档中心</a></h1>
            </div>
        </div>
    </header>
    <div class="sidebar">
        <div class="wrapper">
            <nav class="sidebar-nav">
                <div class="sidebar-content">
                    <ul>
                      <h1 class="nav-title">API文档</h1>

                <li >
                    <a href="../../docs/00_概述/00_约定.html">概述
                        <i class="disclosure"></i>
                    </a>
                    <ul>
                    
                            <li ><a  href="../../docs/00_概述/00_约定.html">约定</a></li>
                    
                            <li ><a  href="../../docs/00_概述/01_定义.html">定义</a></li>
                    
                    </ul>
                </li>

                <li >
                    <a href="../../docs/01_接口/00_账户操作.html">接口
                        <i class="disclosure"></i>
                    </a>
                    <ul>
                    
                            <li ><a  href="../../docs/01_接口/00_账户操作.html">账户操作</a></li>
                    
                            <li ><a  href="../../docs/01_接口/01_员工操作.html">员工操作</a></li>
                    
                            <li ><a  href="../../docs/01_接口/02_审核接口.html">审核接口</a></li>
                    
                            <li ><a  href="../../docs/01_接口/03_公共接口.html">公共接口</a></li>
                    
                    </ul>
                </li>

                <li class="active">
                    <a href="../../docs/SDK下载/Android SDK 说明文档.html">SDK下载
                        <i class="disclosure"></i>
                    </a>
                    <ul>
                    
                            <li class="active"><a class="nav-title-active" href="../../docs/SDK下载/Android SDK 说明文档.html">Android SDK 说明文档</a></li>
                    
                    </ul>
                </li>

                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div class="main">
        <div class="wrapper">
            <section class="nav-page-content typo typo-selection" role="main">
                <h1 id="gameservice-sdk-_v1-0-0">GameService SDK 说明文档_V1.0.0</h1>
<hr>
<h2 id="-sdk-">一、SDK包含内容</h2>
<h2 id="-">二、项目配置</h2>
<ol>
<li>增加工程依赖push-library，alipay_lib；</li>
<li>修改pushsdk_thirdparty_string；</li>
<li>在AndroidManifest中添加声明permission；</li>
</ol>
<h2 id="-api-">三、API使用说明</h2>
<h3 id="3-1-">3.1 设置屏幕方向</h3>
<pre><code>GameService.setScreenOrientation(int orientation)
</code></pre><p>使用SDK业务接口前调用该函数。参数orientation取值如下：</p>
<pre><code>// 横屏
GameService.SCREEN_ORIENTATION_LANDSCAPE         
// 竖屏
GameService.SCREEN_ORIENTATION_PORTRAIT          
</code></pre><h3 id="3-2-">3.2 设置业务环境</h3>
<h3 id="3-3-">3.3 登陆</h3>
<pre><code>GameService.login(Context context, Callback.OnLoginListener listener)
</code></pre><p>调用示例:</p>
<pre><code>GameService.login(MainActivity.this, new Callback.OnLoginListener() {
    @Override
    public void finish(int code, OAuthInfo oAuthInfo) {
        String msg = &quot;&quot;;
        switch (code) {
            case StatusCode.FINISH:
                msg = &quot;token: &quot; + oAuthInfo.getAccessToken();
                break;
            case StatusCode.CANCEL:
                msg = &quot;取消登陆&quot;;
                break;
            default:
                break;
        }
        Toast.makeText(MainActivity.this, msg, Toast.LENGTH_LONG).show();
        Log.d(&quot;OAuth: &quot;, +code + &quot;: &quot; + msg);
    }
});
</code></pre><h3 id="3-4-">3.4 支付</h3>
<pre><code>GameService.pay(Context context, Order order, Callback.OnPayListener listener)
</code></pre><p>调用示例：</p>
<pre><code>Order order = testOrder();
String orderStr = getOrderString(order);
Log.d(&quot;orderStr:&quot;, orderStr);
order.setSign(com.gameservice.sdk.sample.view.main.Rsa
    .sign(orderStr, com.gameservice.sdk.sample.view.main.Keys.PRIVATE));
Log.d(&quot;signStr: &quot;, order.getSign());
GameService.pay(this, order, new Callback.OnPayListener() {
    @Override public void finish(int code, String msg) {
        switch (code) {
            case StatusCode.FINISH:
                msg = &quot;支付完成&quot;;
                break;
            case StatusCode.CANCEL:
                msg = &quot;取消支付&quot;;
                break;
            default:
                break;
        }
        Toast.makeText(TestPayActivity.this, msg, Toast.LENGTH_LONG).show();
        Log.d(&quot;onPay&quot;, code + &quot;: &quot; + msg);
    }
});
</code></pre><h3 id="3-5-">3.5 推送相关</h3>
<h2 id="-">四、相关类介绍</h2>
<h3 id="4-1-">4.1 回调函数类</h3>
<pre><code>public class Callback {

    // 支付回调
    public static interface OnPayListener {
        void finish(int code, String msg);
    }

    // 登陆回调
    public static interface OnLoginListener {
        void finish(int code, OAuthInfo authInfo);
    }

}
</code></pre><h3 id="4-2-">4.2 状态码类</h3>
<pre><code>public class StatusCode {

    // 处理中
    public static final int PROCESS = 1000;
    // 完成
    public static final int FINISH = 2000;
    // 取消
    public static final int CANCEL = 3000;
    // 失败
    public static final int ERROR = 5000;
    // 未知错误
    public static final int ERROR_UNKNOW = 5001;
    // 网络错误
    public static final int ERROR_NETWORK_FAIL = 5002;
    // 参数错误
    public static final int ERROR_PARAM = 5003;
    // 请求超时
    public static final int ERROR_TIME_OUT = 5004;
}
</code></pre><h3 id="4-3-">4.3 认证信息类</h3>
<pre><code>public class OAuthInfo implements BaseType {

    public static final String GRANT_TYPE_MOBILE = &quot;sms_code&quot;;

    public static final String GRANT_TYPE_CLIENT_CREDENTIALS = &quot;client_credentials&quot;;

    public static final String GRANT_TYPE_SNS_TOKEN = &quot;sns_token”;

    // 认证类型
    public String getGrantType() 

    // 认证Token
    public String getAccessToken() 


    // 用户ID
    public String getUserId() 

    // 用户名称
    public String getUserName() 

    // 用户昵称
    public String getNickName() 

    // 用户头像url
    public String getAvatarUrl() 

}
</code></pre><h3 id="4-4-">4.4 订单类</h3>
<pre><code>public class Order implements BaseType {
    // 商品名
    public String getSubject() 
    public void setSubject(String subject)

    // 商品描述
    public String getBody() 
    public void setBody(String body) 

    // 价格 单位分
    public int getMoney() 
    public void setMoney(int money) 

    // 回调地址
    public String getNotifyUrl() 
    public void setNotifyUrl(String notifyUrl) 

    // 用户名称
    public String getUserName() 
    public void setUserName(String userName) 

    // 用户ID
    public String getUserId() 
    public void setUserId(String userId) 

    // 订单号
    public String getOrderId() 
    public void setOrderId(String orderId) 

    // 应用ID
    public String getAppId() 
    public void setAppId(String appId) 

    // 渠道ID
    public int getChannelId() 
    public void setChannelId(int channelId) 

    // IMEI
    public String getImei() 
    public void setImei(String imei)

    // MAC地址 
    public String getMacAddress() 
    public void setMacAddress(String macAddress) 

    // 扩展信息，开发者选填，回调开发者服务器使用
    public String getExtInfo() 
    public void setExtInfo(String extInfo) 

    // 签名信息
    public String getSign() 
    public void setSign(String sign) 
}
</code></pre><h2 id="-">五、交易签名</h2>
<p>交易签名</p>
<h2 id="-">六、代码混淆</h2>
<p>GameService的SDK 包是以 jar 包及资源文件提供给用户的,您在混淆自 己 APK 包的时候请不要将 GameService 的 jar 包一起混淆,因为里面有些自定义 UI 控件,若被混 淆后会因为无法找到相关类而抛异常。
您可以在用 ant 构建混淆包的 build.xml 里面对应位置或者在工程的混淆配置文件里加入:</p>
<pre><code>    -libraryjars libs/*.jar 
</code></pre><p>以避免GameService的相关的 jar 包被混淆。</p>
<h2 id="-faq">七、FAQ</h2>
<h3 id="-sdk-app-">一、将SDK添加到APP工程</h3>
<ol>
<li>将SDK包中libs目录中的文件，添加进开发者工程的libs的目录下</li>
<li>将上述jar包添加进Java Build Path中去。</li>
<li>在AndroidManifest中添加声明permission</li>
</ol>
<pre><code>    &lt;uses-permission android:name=&quot;android.permission.BATTERY_STATS&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.GET_PACKAGE_SIZE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.BROADCAST_STICKY&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.READ_CALL_LOG&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.REORDER_TASKS&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;

      &lt;uses-permission android:name=&quot;tgx.android.permissions.SERVICE&quot; /&gt;
      &lt;uses-permission android:name=&quot;tgx.android.permissions.CLIENT&quot; /&gt;
      &lt;uses-permission android:name=&quot;tgx.android.permissions.VOTE&quot; /&gt;
      &lt;uses-permission android:name=&quot;com.android.launcher.permission.INSTALL_SHORTCUT&quot; /&gt;
      &lt;uses-permission android:name=&quot;com.android.launcher.permission.UNINSTALL_SHORTCUT&quot; /&gt;

      &lt;permission
          android:name=&quot;tgx.android.permissions.SERVICE&quot;
          android:protectionLevel=&quot;normal&quot; /&gt;
      &lt;permission
          android:name=&quot;tgx.android.permissions.CLIENT&quot;
          android:protectionLevel=&quot;normal&quot; /&gt;
      &lt;permission
          android:name=&quot;tgx.android.permissions.VOTE&quot;
          android:protectionLevel=&quot;normal&quot; /&gt;

      &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;
      &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;

以及在&lt;application&gt;&lt;/application&gt;中添加如下代码

    &lt;service
        android:name=&quot;com.tgx.push.sdk.MasterService&quot;
        android:permission=&quot;tgx.android.permissions.SERVICE&quot;
        android:process=&quot;com.tgx.pushsdk.master.service&quot;
        &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;tgx.intent.protect.service.action.START&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;service android:name=&quot;com.tgx.push.sdk.SdkService&quot;
        /&gt;
    &lt;receiver
        android:name=&quot;com.tgx.push.sdk.AutoConsultReceiver&quot;
        android:permission=&quot;tgx.android.permissions.VOTE&quot;
        android:process=&quot;com.tgx.pushsdk.master.service&quot;
        &gt;
        &lt;intent-filter android:priority=&quot;1&quot; &gt;
            &lt;action android:name=&quot;tgx.intent.opensdk.action.VOTE&quot; /&gt;

            &lt;data
                android:host=&quot;TGXD_201405141634230591ktsNZU1FF&quot;
                android:scheme=&quot;tgx&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;
    &lt;activity android:name=&quot;com.tgx.push.sdk.app.parser.view.PushSdkInfoActivity&quot;&gt;
    &lt;/activity&gt;
    &lt;activity android:name=&quot;com.tgx.push.sdk.app.parser.view.PushSdkDialogActivity&quot;&gt;
    &lt;/activity&gt;
    &lt;receiver android:name=&quot;com.ngds.sdk.util.NgdsStaticReceiver&quot;
               android:process=&quot;com.tgx.pushsdk.master.service&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_ADDED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_CHANGED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_DATA_CLEARED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_INSTALL&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_REMOVED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_REPLACED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.PACKAGE_RESTARTED&quot; /&gt;
            &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;
            &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

    &lt;service
        android:name=&quot;com.ngds.sdk.collection.service.CollectService&quot;
        android:process=&quot;:remote&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;com.ngds.sdk.collection.service.ICollectService&quot; /&gt;
            &lt;action android:name=&quot;com.ngds.sdk.collection.service.ISecondary&quot; /&gt;
            &lt;action android:name=&quot;com.ngds.sdk.collection.service.REMOTE_SERVICE&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;receiver
        android:name=&quot;com.ngds.sdk.collection.util.AlarmReceiver&quot;
        android:process=&quot;:remote&quot; /&gt;
</code></pre><h3 id="-api-">二、API说明</h3>
<ol>
<li><p>类说明</p>
<p> 类|描述
:--|:--
PushSDKAPI|Push 服务的对外API接口<br>IMsgReceiver|Push消息回调接口</p>
</li>
<li><p>PushSDKAPI</p>
<p> 分类|功能|方法
:--|:--|:--
Push服务接口|提供push服务|start ,stop 
Tag 管理接口|Tag的创建与删除|setTags,delTags
消息接口|消息回调接口的注册|registerReceiver</p>
</li>
<li><p>AbstractMsgReceiver</p>
<p> 分类|功能|方法
:--|:--|:--
消息接口|用于消息的接收|onMessage
调试接口|用于调试时的消息回调|onDebug</p>
<p> 继承抽象类AbstractMsgReceiver,实现如下方法：</p>
<p>3.1 接受到的push消息</p>
<p> public abstract void onMessage(String message)
 功能:接收到的push消息回调。
 参数:message 消息内容    </p>
<p>3.2 接收到的调试过程信息</p>
<p> public void onDebug(String message)
 功能:接收一些用于调试用的过程信息
 参数:message 调试内容</p>
</li>
<li><p>方法说明</p>
<p> 4.1 push服务初始化及绑定</p>
<pre><code> public final static void start(Context ctx)
 功能:完成push服务的初始化工作，以及与MasterService的自动绑定工作。当masterService第一次启动完成登录操作。
</code></pre><p> 4.2 停止push服务</p>
<pre><code> public final static void stop(Context ctx)
 功能:停止当前应用的push服务，以及与MasterService 的解绑操作。
 参数:ctx 上下文    
</code></pre><p> 4.3 设置Tags</p>
<pre><code> public final static void setTags(String[] tags,String charset)
 功能:为App进行属性标注，最大标签数100，使用时必须使用一致的charset，cid不能作        为tag使用
</code></pre><p> 4.4 删除Tags</p>
<pre><code> 方法 public final static void delTags(String tag,String charset)
 功能:为App删除标注。
</code></pre><p> 4.5 注册消息接收者</p>
<pre><code> 方法 public final static void registerReceiver(Class&lt;? extends         AbstractMsgReceiver&gt; clzz)
 功能:为App注册消息接收接口
</code></pre></li>
</ol>

            </section>
        </div>
    </div>
</div>
<a href="#" class="btn-top"><span class="vertical">回顶部</span></a>
<script>
      $(function() {
        $('pre').addClass('prettyprint');
        $('td pre').removeClass('prettyprint');
        prettyPrint();
        $('.response-btn').on('click', function(e) {
            var sectionNode = $(this).closest('.api-section');
            sectionNode.find('.api-response').slideToggle();
        });
        var navHtml = '';
        navHtml += '<header><h1>' + $('.nav-title-active').text() + '</h1></header>';
        if ($('.api-section').length > 0) {
            navHtml += '<div class="index-nav index-endpoints">';
            navHtml += '    <ul>';
            $('.api-section').each(function(item) {
                var id = $(this).attr('id');
                var method = $(this).find('.api-method').eq(0).text().toUpperCase();
                var api = $(this).find('.api-rule').eq(0)[0].innerHTML;
                var desc = $(this).find('.api-description').eq(0).find('p').eq(0).text();
                navHtml += '        <li>';
                navHtml += '            <a href="#' + id + '">';
                navHtml += '                <span class="type">' + method + '</span>';
                navHtml += '                <b>' + api + '</b>';
                navHtml += '                <span class="description">' + desc + '</span>';
                navHtml += '                <i></i>';
                navHtml += '            </a>';
                navHtml += '        </li>';
            });
            navHtml += '    </ul>';
            navHtml += '</div>';
        }
        $('.nav-page-content').prepend(navHtml);
      });
    </script>
  </body>
</html>
